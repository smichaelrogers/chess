require_relative 'board'
require_relative 'pieces/piece'
require_relative 'pieces/slideable'
require_relative 'pieces/stepable'
require_relative 'pieces/king'
require_relative 'pieces/queen'
require_relative 'pieces/rook'
require_relative 'pieces/bishop'
require_relative 'pieces/knight'
require_relative 'pieces/pawn'

STACKED_PAWN_PENALTY = 50
PAWN_SHIELD_VALUE = 50
KING_THREAT_MULTIPLIER = 100
NEG_INFINITY = -1.0 / 0.0
POS_INFINITY = +1.0 / 0.0
HORIZONTAL_DIRS = [
  [-1, 0],
  [0, -1],
  [0, 1],
  [1, 0]
]
DIAGONAL_DIRS = [
  [-1, -1],
  [-1, 1],
  [1, -1],
  [1, 1]
]
PIECE_POSITIONS = [
  Rook,
  Knight,
  Bishop,
  Queen,
  King,
  Bishop,
  Knight,
  Rook
]
PAWN_ID = [:outer, :outer, :mid, :queen_side, :king_side, :mid, :outer, :outer]
PIECE_ID = [:rook, :knight, :bishop, :queen, :king, :bishop, :knight, :rook]
MATERIAL = {
  Pawn: 100.0,
  Knight: 300.0,
  Bishop: 320.0,
  Rook: 400.0,
  Queen: 800.0,
  King: 16000.0
}
ACTION = {
  Pawn: 10.0,
  Knight: 8.0,
  Bishop: 7.0,
  Rook: 5.0,
  Queen: 3.0,
  King: 1.0
}
MOBILITY = {
  Pawn: 10.0,
  Knight: 20.0,
  Bishop: 30.0,
  Rook: 30.0,
  Queen: 40.0,
  King: 20.0
}
SYMBOLS = {
  King: {
    white: "♔",
    black: "♚"
  },
  Queen: {
    white: "♕",
    black: "♛"
  },
  Rook: {
    white: "♖",
    black: "♜"
  },
  Bishop: {
    white: "♗",
    black: "♝"
  },
  Knight: {
    white: "♘",
    black: "♞"
  },
  Pawn: {
    white: "♙",
    black: "♟"
  }
}

SQUARES = {
  Pawn: [
    [0,  0,  0,  0,  0,  0,  0,  0],
    [50, 50, 50, 50, 50, 50, 50, 50],
    [10, 10, 20, 30, 30, 20, 10, 10],
    [5,  5, 10, 25, 25, 10,  5,  5],
    [0,  0,  0, 20, 20,  0,  0,  0],
    [5, -5,-10,  0,  0,-10, -5,  5],
    [5, 10, 10,-20,-20, 10, 10,  5],
    [0,  0,  0,  0,  0,  0,  0,  0]
  ],
  Knight: [
    [-50,-40,-30,-30,-30,-30,-40,-50],
    [-40,-20,  0,  0,  0,  0,-20,-40],
    [-30,  0, 10, 15, 15, 10,  0,-30],
    [-30,  5, 15, 20, 20, 15,  5,-30],
    [-30,  0, 15, 20, 20, 15,  0,-30],
    [-30,  5, 10, 15, 15, 10,  5,-30],
    [-40,-20,  0,  5,  5,  0,-20,-40],
    [-50,-40,-30,-30,-30,-30,-40,-50]
  ],
  Bishop:[
    [-20,-10,-10,-10,-10,-10,-10,-20],
    [-10,  0,  0,  0,  0,  0,  0,-10],
    [-10,  0,  5, 10, 10,  5,  0,-10],
    [-10,  5,  5, 10, 10,  5,  5,-10],
    [-10,  0, 10, 10, 10, 10,  0,-10],
    [-10, 10, 10, 10, 10, 10, 10,-10],
    [-10,  5,  0,  0,  0,  0,  5,-10],
    [-20,-10,-10,-10,-10,-10,-10,-20]
  ],
  Rook: [
    [0,  0,  0,  0,  0,  0,  0,  0],
    [5, 10, 10, 10, 10, 10, 10,  5],
    [-5,  0,  0,  0,  0,  0,  0, -5],
    [-5,  0,  0,  0,  0,  0,  0, -5],
    [-5,  0,  0,  0,  0,  0,  0, -5],
    [-5,  0,  0,  0,  0,  0,  0, -5],
    [-5,  0,  0,  0,  0,  0,  0, -5],
    [0,  0,  0,  5,  5,  0,  0,  0]
  ],
  Queen: [
    [-20,-10,-10, -5, -5,-10,-10,-20],
    [-10,  0,  0,  0,  0,  0,  0,-10],
    [-10,  0,  5,  5,  5,  5,  0,-10],
    [ -5,  0,  5,  5,  5,  5,  0, -5],
    [ -5,  0,  5,  5,  5,  5,  0, -5],
    [-10,  5,  5,  5,  5,  5,  0,-10],
    [-10,  0,  5,  0,  0,  0,  0,-10],
    [-20,-10,-10, -5, -5,-10,-10,-20]
  ],
  King: [
    [-30,-40,-40,-50,-50,-40,-40,-30],
    [-30,-40,-40,-50,-50,-40,-40,-30],
    [-30,-40,-40,-50,-50,-40,-40,-30],
    [-30,-40,-40,-50,-50,-40,-40,-30],
    [-20,-30,-30,-40,-40,-30,-30,-20],
    [-10,-20,-20,-20,-20,-20,-20,-10],
    [ 20, 20,  0,  0,  0,  0, 20, 20],
    [ 20, 30, 10,  0,  0, 10, 30, 20]
  ]
}

KING_LATE = [
  [-50,-40,-30,-20,-20,-30,-40,-50],
  [-30,-20,-10,  0,  0,-10,-20,-30],
  [-30,-10, 20, 30, 30, 20,-10,-30],
  [-30,-10, 30, 40, 40, 30,-10,-30],
  [-30,-10, 30, 40, 40, 30,-10,-30],
  [-30,-10, 20, 30, 30, 20,-10,-30],
  [-30,-30,  0,  0,  0,  0,-30,-30],
  [-50,-30,-30,-30,-30,-30,-30,-50]
]

FIRST_MOVE = "w_p_e4"

RANKS = ["１","２","３","４","５","６","７","８"]
FILES = ["ａ", "ｂ", "ｃ", "ｄ", "ｅ", "ｆ", "ｇ", "ｈ"]

NOTATION = {
  Pawn: "",
  King: "K",
  Queen: "Q",
  Rook: "R",
  Bishop: "B",
  Knight: "N"
}
